<!--# ! 치고 ENTER-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>
        (제목 태그) Second Page
    </h1>
    <p>
        (문단 태그) 해당 페이지는 /second 주소로 요청이 들어왔을 때 보여지는 페이지입니다.
    </p>
    <!-- table 구조
        <tr> : 행을 생성
        <th> 또는 <td> : 열을 생성
    -->
    
    <!-- csv 폴더의 dept.csv 이용 -->
    <table border=1> <!-- border: 테두리 -->
        <tr>
            <!-- {% 코드 %}를 사용하면 python 코드를 사용할 수 있다.--> 
            <!-- 컬럼의 이름 대입 -->
            {% for col in cols %}
                <th>{{col}}</th>
            {% endfor %}
        </tr>
        <!-- 반복문 시작
            대입되는 데이터는  table_data 변수 -->
        {% for data in table_data %}
        <tr>
            <!-- table_data의 첫 번째 원소()의 값들 -->
            <!-- table_data[0]['DEPTNO'] => {{table_data[0]['DEPTNO']}} -->
            <!-- cols를 이용하여 반복문 생성 -->
            {% for col in cols %} 
            <td>{{data[col]}}</td>
            <!-- 반복문 종료 -->
            {% endfor %}
        </tr>
        <!-- 반복문 종료 -->
        {% endfor %}
    </table>

    <!-- Chart.js - Getting Started의 샘플코드 복붙해 원하는 대로 수정 -->
    <div>
        <!-- 실제 그래프가 그려지는 영역 -->
        <canvas id="myChart"></canvas>
    </div>
    <!-- 그래프를 그리는 기능을 가진 JS 라이브러리 로드 -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- 그래프를 그려주는 부분 -->
    <script>
    // id가 myChart인 태그 선택
    const ctx = document.getElementById('myChart');
    
    // myChart라는 태그에 그래프 그리기
    new Chart(ctx, {
        // 그래프의 종류 선택 (bar, line, ...)
        type: 'line',
        // 그래프의 x축과 y축의 데이터가 입력되는 부분
        data: {
            // labels: x축의 데이터
            labels: {{x_data | tojson}},
            // datasets: y축의 데이터들
            datasets: [
                // dict 데이터가 y축의 데이터 하나를 의미
                {
                    // label: y축 데이터의 설명 (범례)
                    label: '# of Votes',
                    // data: 실제 y축의 데이터
                    data: {{y_data | tojson}}
                }
            ]
        },
        // options는 선택사항이라 없어도 무방
        options: {
            scales: {
                y: {
                beginAtZero: true
                }
            }
        }
        }
    );
    </script>
</body>
</html>